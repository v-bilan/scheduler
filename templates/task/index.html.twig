{% extends 'base.html.twig' %}

{% block title %}Hello TaskController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

    <div class="">
        <a href="{{ path('app_task', {year: year, week: week - 1}) }}" aria-label="попередній тиждень"><<</a>
        <strong>{{ date }}</strong>
        <a href="{{ path('app_task', {year: year, week: week + 1}) }}" aria-label="наступний тиждень">
            >>
        </a>
    </div>


<div>
    <form method="POST" action="{{ path('app_taks_store', {year: year, week: week})}}">
       <table>
            {% for taskName, task in tasks %}           

                <tr>
                    <td  class="border border-gray-300 p-2">{{task.label}}</td>
                    
                    {% if task.witness is defined and task.witness is not empty%}
                        <td  class="border border-gray-300 p-2">{{ task.witness.fullName }}</td>
                    {% endif %}
                    <td>
                        <select name="witnesses[{{taskName}}]" id="witnesses"
                            class="w-full p-2 border rounded-lg focus:ring focus:ring-blue-200">
                            
                            {% for witness in task.witnesses %}
                                <option value="{{ witness.witness_id }}"
                                    {% if witness.witness_id == task.witness.id ?? task.suggested_witness.witness_id %}
                                     selected 
                                     {% endif %}>
                                    {{ witness.fullName }}
                                </option>
                            {% endfor %}
                        </select>
                    </td>
                </tr>
            {% endfor %}
        </table>
        <button type="submit" class="mt-4 w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700">
            {{ 'Update' | trans }}
        </button>
        </form>
</div>
{% endblock %}
